<div class="past-story relate" auto-height>
	<div class="map-journey" ng-style="mapJourneyCss">
		<div id="map" class="get-map-height">
		</div>
	</div>
	<div class="past-journey on-go-journey mt60">
		<div class="container-fluid">
			<!-- past story main -->
			<section class="main-paststory" ng-style="cardHolderCss">
				<div class="started-journey-card">
					<div class="relate text-center">
						<div class="pastjourney-start journey-start">
							<img src="img/ongojourney/journey-step.png" alt="" class="img-responsive m-center" width="40">
							<h4 class="avenir-roman color-white"><span class="block">{{pastJourneyArray.name}}</span></h4>
							<div class="you-in">
								<img src="img/icons/at.png" alt="" class="img-responsive m-center" width="140">
							</div>
						</div>
					</div>
					<div class="started-paststory">
						<div class="box-start-paststory box-start-journey">
							<!-- header started -->
							<div class="started-heading relate text-center clearfix" ng-init="pastStory.kindOf = {};">
								<div class="start-card-options" ng-click="editOption(pastStory.kindOf);" ng-if="template.isMine">
									<img src="img/options-white.png" alt="Edit Journey" width="3" class="img-responsive">
									<div class="edit-kind-journey" ng-show="pastStory.kindOf.backgroundClick;">
										<ul>
											<!-- <li><a ng-click="editKindOf()">Edit Kind of Journey</a></li> -->
											<li><a href="" ng-click="changeBannerDate()">Change Date &amp; Time</a></li>
										</ul>
									</div>
								</div>
								<h4 class="color-white avenir-light">{{pastJourneyArray.startLocation}}</h4>
								<p class="color-white m-clear avenir-roman">
									<!-- <i class="fa fa-calendar mr5"></i> -->
									<span class="mr5">{{pastJourneyArray.startTime|formatDate: 'date'}}</span> <span class="mr5">|</span>
									<!-- <i class="fa fa-clock-o mr5"></i> -->
									<span class="mr5">{{pastJourneyArray.startTime|formatDate: 'time'}}</span></p>
								</div>
								<!-- header started end-->
								<!-- story banner holder -->
								<div class="banner-imgholder journeybanner-imgholder start-journey">
									<img src="{{pastJourneyArray.startLocationPic|uploadpath}}" alt="" class="img-responsive">
									<!-- past story heading -->
									<!-- <div class="past-story-heading">
										<div class="clearfix">
											<div class="pull-left">
												<span class="color-white">{{pastJourneyArray.startTime|formatDate: 'date'}} | {{pastJourneyArray.startTime|formatDate: 'time'}}</span>
											</div>
											<div class="pull-right" ng-init="pastStory.kindOf = {};">
												<div class="start-past-card relate" ng-click="editOption(pastStory.kindOf);" ng-if="template.isMine">
													<img src="img/options-white.png" alt="Edit Journey" width="3" class="img-responsive">
													<div class="edit-kind-journey" ng-show="pastStory.kindOf.backgroundClick;">
														<ul>
															<li><a ng-click="editKindOf()">Edit Kind of Journey</a></li>
															<li><a href="" ng-click="changeBannerDate()">Change Date &amp; Time</a></li>
														</ul>
													</div>
												</div>
											</div>
										</div>
									</div> -->
									<!-- past story heading end-->
									<!-- past story overivew -->
									<div class="journey-overview past-story-overview">
										<ul>
											<li ng-if="pastJourneyArray.count.photos>0">
												<div class="symbol-up">
													<img src="img/camera.png" alt="Camera" width="15" class="mr5"> 
													<span class="inline-block v-mid count-reach ng-binding">{{pastJourneyArray.count.photos}}</span>
												</div>
											</li>
											<li ng-if="pastJourneyArray.count.videos>0">
												<div class="symbol-up">
													<img src="img/video.png" alt="Video" width="15" class="mr5">
													<span class="inline-block v-mid count-reach ng-binding">{{pastJourneyArray.count.videos}}</span>
												</div>
											</li>
											<li ng-if="pastJourneyArray.count.checkIns>0">
												<div class="symbol-up">
													<img src="img/location.png" alt="Location" width="15" class="mr5">
													<span class="inline-block v-mid count-reach ng-binding">{{pastJourneyArray.count.checkIns}}</span>
												</div>
											</li>
											<li ng-if="pastJourneyArray.count.thoughts>0">
												<div class="symbol-up">
													<img src="img/thought-white.png" alt="Thought" width="15" class="mr5">
													<span class="inline-block v-mid count-reach ng-binding">{{pastJourneyArray.count.thoughts}}</span>
												</div>
											</li>
										</ul>
									</div>
									<!-- past story overivew end-->
								</div>
								<!-- story banner holder end-->
								<!-- past story detail -->
								<div class="past-story-detail" hidden>
									<div class="clearfix">
										<div class="pull-left">
											<div class="start-end-date avenir-medium">
												<p class="past-startdate">Start Date : <span class="date">{{pastJourneyArray.startTime | formatDate : 'date'}}</span><span class="edit-date pointer">Edit</span></p>
												<p class="past-enddate">End Date : <span class="date">{{pastJourneyArray.endTime | formatDate: 'date'}}</span><span class="edit-date pointer">Edit</span></p>
											</div>
										</div>
										<div class="pull-right">
											<div class="journeys-dayscount color-dark-blue avenir-medium text-center"><span class="days-count">{{pastJourneyArray.endTime|dateDifference: pastJourneyArray.startTime}}</span>Days</div>
										</div>
									</div>
								</div>	
								<!-- past story detail end-->
							</div>		
						</div>
					</div>
					<!-- destination visited -->
					<div class="pastdestination-visited">
						<div class="dest-heading">
							<div class="clearfix">
								<div class="pull-left">
									<span class="avenir-medium color-dark-blue">Destination Visited</span>
								</div>
								<div class="pull-right">
									<span class="add-dest-visited avenir-medium color-dark-blue pointer" ng-click="addDestination(destinationData);">Add</span>
								</div>
							</div>
						</div>
						<div class="list-country-city">
							<!-- list of country city visited -->
							<div class="list-holder" ng-repeat="country in pastJourneyArray.destinationVisited track by $index">
								<div class="clearfix">
									<div class="pull-left">
										<div class="" ng-hide="$index == showEdit">
											<div class="past-flag-holder">
												<img ng-src="{{country.country.flag|uploadpath}}" alt="{{country.country.name}}" class="get-center" height="40">
											</div>
											<h4 class="dest-country-vist avenir-roman country-name-visited">
												<span class="country-name-visited">{{country.country.name}} :</span>								
											</h4>
											<h4 class="dest-city-visit avenir-roman city-name-visited">
												<span ng-repeat="city in country.cityVisited track by $index">
													{{city.name}}
												</span>
											</h4>
										</div>
										<div class="edit-data" ng-show="$index == showEdit">
											<div class="edit-country">
												<ui-select ng-model="country.country" theme="bootstrap" on-select="countryReplace(country,$index,country.country);">
													<ui-select-match placeholder="Country Visited">{{$select.selected.name}}</ui-select-match>
													<ui-select-choices repeat="country in countries | filter: $select.search track by $index">
														<h4 ng-bind="country.name"></h4>
													</ui-select-choices>
												</ui-select>
											</div>
											<div class="edit-city">
												<ui-select multiple ng-model="country.cityVisited">
													{{$select.search}}
													<ui-select-match placeholder="City Visited">{{$item.name}}</ui-select-match>
													<ui-select-choices repeat="city in cities | filter: $select.search track by $index" refresh="getCityVisited(country.country._id,$select.search)">
														<h4 ng-bind="city.name"></h4>
													</ui-select-choices>
												</ui-select>
											</div>
											<div class="edit-action">
												<span ng-click="viewEdit($index);">Cancel</span>
												<button class="btn btn-pink" ng-click="saveDestinationVisited()">Save</button>
											</div>
										</div>
									</div>
									<div class="pull-right">
										<div class="edit-delete-dest">
											<span class="edit-dest pointer" title="Edit" ng-click=viewEdit($index);><i class="fa fa-pencil color-light-grey"></i></span>
											<span class="delete-dest pointer" title="Delete" ng-click="deleteVisited($index,country);"><i class="fa fa-trash color-light-grey"></i></span>
										</div>
									</div>
								</div>
							</div>
							<!-- list of country city visited end-->
						</div>
					</div>
					<!-- destination visited end-->
					<!--trip traveller buddies-->
					<div class="dash-up"></div>
					<div class="trip-travellers-card">
						<div class="trip-travellers-card-header">
							<div class="clearfix gray-line-bottom">
								<h4 class="font-bold color-username pointer m-clear" style="text-align: center;padding: 6px 0">Trip Travellers
								({{pastJourneyArray.buddies.length+1}})</h4>
							</div>
						</div>
						<div class="trip-travellers-card-main">
							<div class="trip-user-imgholder">
								<div class="travellers-img-ongo pointer" ui-sref="mylife({'urlSlug':pastJourneyArray.user.urlSlug})">
									<img src="{{pastJourneyArray.user.profilePicture|uploadpath:99:99:'cover'}}" alt="" class="img-responsive">
								</div>
								<h5 class="bold" ui-sref="mylife({'urlSlug':pastJourneyArray.user.urlSlug})">
									{{pastJourneyArray.user.name}}
								</h5>
							</div>
							<span ng-if="pastJourneyArray.buddies.length>0">
								<div class="trip-user-imgholder" ng-repeat="buddy in pastJourneyArray.buddies track by $index">
									<div class="travellers-img-ongo pointer" ui-sref="mylife({'urlSlug':buddy.urlSlug})">
										<img src="{{buddy.profilePicture|uploadpath:99:99:'cover'}}" alt="" class="img-responsive">
									</div>
									<h5 class="bold" ui-sref="mylife({'urlSlug':buddy.urlSlug})">
										{{buddy.name}}
									</h5>
								</div>
							</span>
						</div>
					</div>
					<!--trip traveller buddies end-->
					<!-- past journey card -->
					<div class="past-journey-card" ng-if="pastJourneyArray.post">
						<past-journey-card is-mine="template.isMine" is-logged-in="isLoggedIn" json="pastJourneyArray" post="pastStory" ng-repeat="pastStory in pastJourneyArray.post track by $index" get-likes-data="getLikesData(post)" get-comments-data="getCommentsData(post)" close-back-drop="closeBackDrop()" template="template" ></past-journey-card>
						<!-- past story-end -->
						<div class="past-story-end ongo-journey-end" ng-if="journey.onGoing==false">
							<div class="journey-end text-center">
								<h4 class="color-white avenir-roman">{{pastStory.location}}</h4>
								<p class="m-clear color-white avenir-roman">
									<!-- <i class="fa fa-calendar mr5"></i> -->
									<span class="mr5">{{pastJourneyArray.endTime|formatDate: 'date'}}</span>
									<span class="mr5">|</span>
									<!-- <i class="fa fa-clock-o mr5"></i> -->
									<span class="mr5">{{pastJourneyArray.endTime|formatDate: 'time'}}</span></p>
								</div>
								<div class="end-journey-flag text-center">
									<img src="img/ongojourney/end-flag.png" alt="" class="img-responsive m-center" width="50">
									<span class="color-white jenna-font">until we meet again!</span>
								</div>
							</div>
							<!-- ongo journey end -->
						</div>
						<!-- past journey card end-->

						<!-- ongo journey-end -->
						<div class="ongo-journey-end past-journey-end" ng-if="pastJourneyArray.onGoing==false">
							<div class="journey-end text-center">
								<h4 class="color-white avenir-roman">{{pastStory.location}}</h4>
								<p class="m-clear color-white avenir-roman">
									<!-- <i class="fa fa-calendar mr5"></i> -->
									<span class="mr5">{{pastStory.endTime|formatDate: 'date'}}</span>
									<span class="mr5">|</span>
									<!-- <i class="fa fa-clock-o mr5"></i> -->
									<span class="mr5">{{pastStory.endTime|formatDate: 'time'}}</span></p>
								</div>
								<div class="end-journey-flag text-center">
									<img src="img/ongojourney/end-flag.png" alt="" class="img-responsive m-center" width="50">
									<span class="color-white jenna-font">until we meet again!</span>
								</div>
							</div>
							<!-- ongo journey end -->
						</section>
						<!-- past story main end -->
					</div>
				</div>
			</div>
			<div class="" ng-if="postScrollData.viewList">
				<comment-like-section post="post" user-data='userData' post-scroll-data="postScrollData" view-card-comment="viewCardComment" view-card-like='viewCardLike'
				list-of-comments="listOfComments" list-of-likes="listOfLikes" get-card="getCard" show-like-show='showLikeShow'></comment-like-section>
			</div>